<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>

    <link href="css/StyleDefult.css" rel="stylesheet" type="text/css" />
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/lightbox.min.css" rel="stylesheet" />

    <script src="scripts/jquery-3.3.1.js"></script>

    <script type="text/javascript" src="cordova.js"></script>

    <script src="scripts/database.js"></script>
    <script src="scripts/jsSingleResponse.js"></script>
    <script type="text/javascript">

        var id;
        document.addEventListener("deviceready", onDeviceReady, false);
        function onDeviceReady() {
            id = getUrlVars()["id"];
            db.transaction(function (tx) {
                tx.executeSql("SELECT B1_O,B8b,B2a_1_1,B2a_2_1,B2a_3_1,B2a_4_1,B2a_5_1,B2a_6_1,B2a_7_1,B2a_8_1,B2a_9_1,B2a_10_1,B2a_11_1,B2a_12_1,B2a_13_1,B2a_14_1,B2a_15_1,B2a_16_1,B2a_17_1,B2a_18_1,B2a_19_1,B2a_20_1 FROM INTERVIEWS WHERE InterviewID=" + id, [], function (tx, val) {
                    var row = val.rows.item(0);
                    var sayi = parseInt(row.B1_O);
                    var b8bDegerleri = row.B8b ? row.B8b.split(',') : [];
         
                    if (b8bDegerleri.length > 0) {
                        var firstAdded = false;
                        
                        for (var j = 0; j < b8bDegerleri.length; j++) {
                            var i = parseInt(b8bDegerleri[j]);
                            var isimFieldName = "B2a_" + i + "_1";
                            var isim = row[isimFieldName];
                            
                            if (!firstAdded) {
                                // İlk satırı güncelle
                                var firstRow = $("#QuestionTable tbody>tr:first");
                                firstRow.find('input[type=radio]').attr('id', 'B9_' + i).attr('value', i);
                                firstRow.find('label').attr('for', 'B9_' + i).text(isim);
                                firstRow.find('td:eq(1)').text(i);
                                firstAdded = true;
                            } else {
                                // Yeni satır ekle
                                var newRow = $("#QuestionTable tbody>tr:first").clone(true);
                                newRow.find('input[type=radio]').attr('id', 'B9_' + i).attr('value', i);
                                newRow.find('label').attr('for', 'B9_' + i).text(isim);
                                newRow.find('td:eq(1)').text(i);
                                
                                if (j % 2 === 0) {
                                    newRow.removeClass('AlternateTableRow');
                                } else {
                                    newRow.addClass('AlternateTableRow');
                                }
                                
                                $("#QuestionTable tbody tr:last").before(newRow);
                            }
                        }
                        
                        SetStartUp();
                     }
                });
            });
        }


        window.onload = function () {
            id = getUrlVars()["id"];
        };


        function getUrlVars() {
            var vars = [], hash;
            var indexofHash = window.location.href.indexOf('#');
            var hashes;
            if (indexofHash == -1) {
                hashes = window.location.href.slice((window.location.href.indexOf('?')) + 1).split('&');
            } else {
                hashes = window.location.href.slice((window.location.href.indexOf('#')) + 1).split('&');
            }
            for (var i = 0; i < hashes.length; i++) {
                hash = hashes[i].split('=');
                vars.push(hash[0]);
                vars[hash[0]] = hash[1];
            }
            return vars;
        }

        function gecisKontrol() {

            var kontrol = CheckValues();
            if (kontrol) {
                myUpdateRedirect("INTERVIEWS", "B9=" + currentValue, " InterviewID=" + window.localStorage["InterviewID"], "B10.html?id=" + window.localStorage["InterviewID"]);
            }
        }

        function goBack() {
            window.history.back();
        }
    </script>
</head>
<body>

    <form id="form1">
        <table border="0" id="QuestionText">
            <tbody>
                <tr>
                    <td>
                        <span id="StepNameTD">B9.</span><span id="QuestionTextTD">
                        <font face="calibri" color="#000000" >
                            Eve gelir getiren kişiler arasında EVE DÜZENLİ VE EN YÜKSEK GELİRİ GETİREN kişinin kim olduğunu söyler misiniz?
                        </font>
                        </span>
                    </td>
                </tr>
            </tbody>
        </table>

        <div id="QuestionBuilderPanel">
            <table id="QuestionTable" class="cssQuestionTable">
                <tbody>
                    <tr class="AlternateTableRow">
                        <td class="columnDivider"></td>
                        <td align="right">#</td>
                        <td align="right"><input type="radio" class="radioStyle" name="B9" id="B9_#" value="#"><span></span></td>
                        <td><label for="B9_#">lblisim</label></td>
                    </tr>

                    <tr>
                        <td colspan="3">    <input type="button" value="Durum Kodla" onclick="javascript: window.location.href = 'ResponseKodu.html';" /></td>
                        <td align="right">        <input type="button" id="next" name="next" value="İleri" onclick="gecisKontrol();" /></td>
                    </tr>
                </tbody>
            </table>
        </div>

    </form>
</body>
</html>
